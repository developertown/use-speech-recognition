"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,n,e=require("typescript-fsa-reducers"),r=require("typescript-fsa"),i=require("react");function o(){return(o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t}).apply(this,arguments)}!function(t){t.READY="ready",t.STOPPED="stopped",t.STARTED="started",t.ERROR="error",t.RESET="reset",t.ABORTED="aborted"}(t||(t={})),function(t){t.ABORT="ABORT",t.RESET="RESET",t.STOP="STOP"}(n||(n={}));var s=r.actionCreatorFactory("SPEECH_RECOGNITION"),c=s("SET_TRANSCRIPT"),a=s("SET_STATUS"),u=s("SET_FINAL_TRANSCRIPT"),l=s("SET_INTERIM_TRANSCRIPT"),T=s("SET_LISTENING"),f=s("SET_PAUSE_AFTER_DISCONNECT"),p={status:t.READY,transcript:"",interimTranscript:"",finalTranscript:"",listening:!1,pauseAfterDisconnect:!1},S=e.reducerWithInitialState(p).case(c,(function(t,n){return o(o({},t),{},{transcript:n})})).case(f,(function(t,n){return o(o({},t),{},{pauseAfterDisconnect:n})})).case(l,(function(t,n){return o(o({},t),{},{interimTranscript:n})})).case(u,(function(t,n){return o(o({},t),{},{finalTranscript:n})})).case(a,(function(t,n){return o(o({},t),{},{status:n})})).case(T,(function(t,n){return o(o({},t),{},{listening:n})})),R={autoStart:!1,continuous:!1,interimResults:!0,onResult:function(){},onDisconnect:function(){},onStart:function(){}};function E(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return n.map((function(t){return t.trim()})).join(" ").trim()}exports.defaultOptions=R,exports.useSpeechRecognition=function(e){void 0===e&&(e=R);var r="undefined"!=typeof window&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),o=i.useReducer(S,p),s=o[0],d=s.listening,g=s.status,O=s.pauseAfterDisconnect,A=s.interimTranscript,P=s.finalTranscript,b=s.transcript,w=o[1],C=r?new r:void 0,h=i.useCallback((function(e){if(C)switch(e){case n.ABORT:w(a(t.ABORTED)),w(f(!0)),C.abort();break;case n.RESET:w(a(t.RESET)),w(f(!1)),C.abort();break;case n.STOP:default:w(a(t.STOPPED)),w(f(!0)),C.stop()}}),[C]),D=i.useCallback((function(){h(n.RESET),w(c("")),w(l("")),w(u(""))}),[h]),m=i.useCallback((function(){if(C&&!d){C.continuous||D();try{C.start()}catch(t){}w(a(t.STARTED)),w(T(!0))}}),[d,C,D]),I=i.useCallback((function(){h(n.STOP),w(a(t.STOPPED)),w(T(!1))}),[h]),_=i.useCallback((function(){w(T(!1)),h(n.ABORT)}),[h]),v=i.useCallback((function(t){console.log("updating transcript",t);for(var n="",r="",i=t.resultIndex;i<t.results.length;++i)t.results[i].isFinal?r=E(r,t.results[i][0].transcript):n=E(n,t.results[i][0].transcript);w(c(E(r,n))),w(l(n)),w(u(r)),e.onResult&&e.onResult(r,n)}),[e]),k=i.useCallback((function(){w(a(t.STOPPED)),O?w(T(!1)):C&&(C.continuous?m():w(T(!1))),w(f(!1))}),[O,C,m]),y=i.useCallback((function(t){var n=t.message;console.log("Speech recognition error detected: "+t.error),console.log("Additional information: "+n)}),[]);return i.useEffect((function(){C&&!d&&(C.continuous=!1!==e.continuous,C.interimResults=e.interimResults,C.onresult=v,C.onend=k,C.onerror=y),C&&e&&e.autoStart&&(C.start(),w(T(!0)))}),[d,k,y,e,C,v]),{transcript:b,interimTranscript:A,finalTranscript:P,status:g,listening:d,recognition:C,resetTranscript:D,startListening:m,stopListening:I,abortListening:_}};
//# sourceMappingURL=use-speech-recognition.cjs.production.min.js.map
